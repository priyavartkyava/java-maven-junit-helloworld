pipeline
{
    agent 'any'
    environment 
    {
       GIT_BRANCH = 'master'
    }
    tools
    {
      maven 'm3'
    }
    stages
    {
        stage ('Compile')
        {
            steps 
            {
               sh 'mvn compile'
            }
        }
        stage('Package')
        {
            steps
            {
             sh  'mvn package'
            }
        }
       stage('archive')
        {
            when {
                GIT_BRANCH == 'master'
            }
            {
                archiveArtifacts 'target/*.jar'
            }
        }
    }    
}
